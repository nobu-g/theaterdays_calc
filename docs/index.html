<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ミリシタスコア計算機</title>

    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>
    <h1>
        ミリシタスコア計算機
    </h1>
    <h2>

    </h2>
    <form name="skill" id="skill">
        <div id="skill1">
            <p>
                スキル1:<br>
                <input name="interval" required="required" min="0" type="number">秒ごとに
                <input name="probability" required="required" min="0" max="100" type="number">%の確率で
                <input name="duration" required="required" min="0" type="number">秒間、<br>
                <select name="target">
                    <option value="">選択</option>
                    <option value="score">Perfect/Greatのスコア</option>
                    <option value="score">Perfectのスコア</option>
                    <option value="combo">コンボボーナス</option>
                </select>が
                <input name="rate" required="required" min="0" max="100" type="number">%アップ
            </p>
        </div>
        <div id="skill2">
            <p>
                スキル2:<br>
                <input name="interval" required="required" min="0" type="number">秒ごとに
                <input name="probability" required="required" min="0" max="100" type="number">%の確率で
                <input name="duration" required="required" min="0" type="number">秒間、<br>
                <select name="target">
                    <option value="">選択</option>
                    <option value="score">Perfect/Greatのスコア</option>
                    <option value="score">Perfectのスコア</option>
                    <option value="combo">コンボボーナス</option>
                </select>が
                <input name="rate" required="required" min="0" max="100" type="number">%アップ
            </p>
        </div>

        <div id="skill3">
            <p>
                スキル3:<br>
                <input name="interval" required="required" min="0" type="number">秒ごとに
                <input name="probability" required="required" min="0" max="100" type="number">%の確率で
                <input name="duration" required="required" min="0" type="number">秒間、<br>
                <select name="target">
                    <option value="">選択</option>
                    <option value="score">Perfect/Greatのスコア</option>
                    <option value="score">Perfectのスコア</option>
                    <option value="combo">コンボボーナス</option>
                </select>が
                <input name="rate" required="required" min="0" max="100" type="number">%アップ
            </p>
        </div>
        <div id="skill4">
            <p>
                スキル4:<br>
                <input name="interval" required="required" min="0" type="number">秒ごとに
                <input name="probability" required="required" min="0" max="100" type="number">%の確率で
                <input name="duration" required="required" min="0" type="number">秒間、<br>
                <select name="target">
                    <option value="">選択</option>
                    <option value="score">Perfect/Greatのスコア</option>
                    <option value="score">Perfectのスコア</option>
                    <option value="combo">コンボボーナス</option>
            </select>が
                <input name="rate" required="required" min="0" max="100" type="number">%アップ
            </p>
        </div>
        <div id="skill5">
            <p>
                スキル5:<br>
                <input name="interval" required="required" min="0" type="number">秒ごとに
                <input name="probability" required="required" min="0" max="100" type="number">%の確率で
                <input name="duration" required="required" min="0" type="number">秒間、<br>
                <select name="target" onchange="setMusic()">
                    <option value="">選択</option>
                    <option value="score">Perfect/Greatのスコア</option>
                    <option value="score">Perfectのスコア</option>
                    <option value="combo">コンボボーナス</option>
                </select>が
                <input name="rate" required="required" min="0" max="100" type="number">%アップ
            </p>
        </div>
    </form>

    <form name="music">
        <div id="music">
            <p>
                楽曲:<br>
                <select name="music">
                    <option value="">楽曲選択</option>
                    <option value="自分REST@RT">自分REST@RT</option>
                    <option value="Brand New Theater!">Brand New Theater!</option>
                </select>
            </p>
        </div>
    </form>

    <form name="appeal">
        <div id="appeal">
            <p>
                合計アピール:<br>
                <input name="appeal" required="required" min="0" type="number">
            </p>
        </div>
    </form>

    <form>
        <div class="button">
            <input type="button" value="ファイル読み込み" onClick="calc()">　
            <input type="button" value="クリア" onClick="document.getElementById('text1').innerText=''">
        </div>
    </form>

    <div id="text1"></div>



<script type="text/javascript" src="jquery-3.3.1.min.js"></script>  // 最初に読み込む
<script type="text/javascript" src="load_file.js"></script>
<script type="text/javascript" src="parse.js"></script>
<script type="text/javascript" src="simulate.js"></script>
<script>




// 最高スコアを計算
function calc() {
    const musicName = $('#music select option:selected').val()
    // loadTextFile('https://nobu-g.github.io/theaterdays_calc/' + musicName + '.bms');
    loadTextFile('https://nobu-g.github.io/theaterdays_calc/自分REST@RT.bms');    // デバッグ用
    document.getElementById('text1').innerText = bmsText;
    const musicData = parse(bmsText);
    simulate(musicData.notes, musicData.BPM, musicData.level);
}




</script>

</body>
</html>
